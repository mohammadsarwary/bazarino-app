# ๐ ุฑุงูููุง ุณุฑุน ููุชูฺฉุดู - Bazarino Plugin

> ุงุฑุณุงู Push Notification ุจู ฺฉุงุฑุจุฑุงู ุงูพูฺฉุดู

---

## ๐ ูพุดโูุงุฒูุง

โ **Firebase Project** ุจุง FCM ูุนุงู  
โ **FCM Server Key** ุงุฒ Firebase Console  
โ **Flutter App** ุจุง Firebase Messaging ูุตุจ ุดุฏู  

---

## โก ุฑุงูโุงูุฏุงุฒ ุณุฑุน (5 ุฏููู)

### ฺฏุงู 1: ุฏุฑุงูุช FCM Server Key

1. ุจุฑู ุจู [Firebase Console](https://console.firebase.google.com/)
2. ูพุฑูฺู ุฎูุฏุช ุฑู ุงูุชุฎุงุจ ฺฉู
3. Settings (โ๏ธ) > **Project Settings**
4. ุชุจ **Cloud Messaging**
5. **Server key** ุฑู ฺฉูพ ฺฉู

### ฺฏุงู 2: ุชูุธู ุฏุฑ WordPress

1. ูุฑูุฏ ุจู WordPress Admin
2. ุฑูุชู ุจู **App Config > Notification Settings**
3. **FCM Server Key** ุฑู Paste ฺฉู
4. **Save Changes** ุจุฒู

### ฺฏุงู 3: ุงุฑุณุงู ุงููู ููุชู

1. ุจุฑู ุจู **App Config > Notifications**
2. ูุฑู ุฑู ูพูุฑ ฺฉู:
   - **Title**: "ุฎูุด ุขูุฏุฏ! ๐"
   - **Message**: "ุจู ุงูพูฺฉุดู ูุง ุฎูุด ุขูุฏุฏ"
   - ุณุงุฑ ููุฏูุง (ุงุฎุชุงุฑ)
3. **Send Notification** ุจุฒู

โ **ุชูุงู!** ููุชู ุจู ููู ฺฉุงุฑุจุฑุงู ุงุฑุณุงู ุดุฏ.

---

## ๐ฏ ุตูุญู Notifications

### ุจุฎุด ุขูุงุฑ (Statistics)

```
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโ
โ Total Devices   โ Android Devices โ   iOS Devices   โ   Total Sent    โ
โ      152        โ       120       โ       32        โ      6800       โ
โโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโ
```

- **Total Devices**: ุชุนุฏุงุฏ ฺฉู ุฏุณุชฺฏุงูโูุง ูุนุงู
- **Android Devices**: ุชุนุฏุงุฏ ุฏุณุชฺฏุงูโูุง Android
- **iOS Devices**: ุชุนุฏุงุฏ ุฏุณุชฺฏุงูโูุง iOS
- **Total Sent**: ุชุนุฏุงุฏ ฺฉู ููุชูโูุง ุงุฑุณุงู ุดุฏู

### ูุฑู ุงุฑุณุงู ููุชู

#### ููุฏูุง ุงุตู (ุงูุฒุงู)

| ููุฏ | ุชูุถุญุงุช | ูุซุงู |
|------|---------|------|
| **Title** | ุนููุงู ููุชูฺฉุดู | "ูุฑูุด ูฺู! ๐ฅ" |
| **Message** | ูุชู ูพุงู | "ุชุง 50% ุชุฎูู ุฑู ูุญุตููุงุช ููุชุฎุจ" |

#### ููุฏูุง ุงุฎุชุงุฑ

| ููุฏ | ุชูุถุญุงุช | ูุซุงู |
|------|---------|------|
| **Image URL** | ุขุฏุฑุณ ุชุตูุฑ | https://example.com/sale.jpg |
| **Target Platform** | ูพูุชูุฑู ูุฏู | All / Android / iOS |
| **Action Type** | ููุน ุงฺฉุดู | Open Product |
| **Action Value** | ููุฏุงุฑ ุงฺฉุดู | Product ID: 123 |

### ุงููุงุน Action

```
โโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Action Type     โ              ุชูุถุญุงุช                   โ
โโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ No Action        โ ููุท ููุชู ููุงุด ุฏุงุฏู ูโุดู            โ
โ Open App         โ ุจุงุฒ ฺฉุฑุฏู ุงูพูฺฉุดู                     โ
โ Open URL         โ ุจุงุฒ ฺฉุฑุฏู ฺฉ ููฺฉ                      โ
โ Open Product     โ ุจุงุฒ ฺฉุฑุฏู ุตูุญู ูุญุตูู (ูุงุฒ ุจู ID)      โ
โ Open Category    โ ุจุงุฒ ฺฉุฑุฏู ุฏุณุชูโุจูุฏ (ูุงุฒ ุจู ID)       โ
โโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุชุงุฑุฎฺู ููุชูโูุง

ุฌุฏูู ููุงุด ููุชูโูุง ุงุฑุณุงู ุดุฏู:

```
Title              | Message          | Sent | Failed | Date
-------------------|------------------|------|--------|------------------
ูุญุตูู ุฌุฏุฏ         | ูุญุตููุงุช ุฌุฏุฏ...  | 150  |   2    | 2025-10-08 12:30
ูุฑูุด ูฺู          | ุชุง 50% ุชุฎูู...  | 148  |   4    | 2025-10-07 10:15
```

---

## ๐ฑ ูููููโูุง ฺฉุงุฑุจุฑุฏ

### 1๏ธโฃ ุงุนูุงู ูุญุตูู ุฌุฏุฏ

```
Title:        "ูุญุตูู ุฌุฏุฏ ุงุถุงูู ุดุฏ! ๐"
Message:      "ฺฏูุด Samsung Galaxy S24 Ultra ุงุถุงูู ุดุฏ"
Image URL:    https://yoursite.com/images/s24.jpg
Action Type:  Open Product
Action Value: 456
Platform:     All
```

### 2๏ธโฃ ุงุนูุงู ูุฑูุด ูฺู

```
Title:        "ูุฑูุด ูฺู! ๐ฅ"
Message:      "ุชุง 50% ุชุฎูู ุฑู ููพโุชุงูพโูุง"
Image URL:    https://yoursite.com/images/sale.jpg
Action Type:  Open Category
Action Value: 12  (Category ID ููพโุชุงูพโูุง)
Platform:     All
```

### 3๏ธโฃ ุงุฏุขูุฑ ุณุจุฏ ุฎุฑุฏ

```
Title:        "ุณุจุฏ ุฎุฑุฏ ุดูุง ููุชุธุฑ ุงุณุช! ๐"
Message:      "ูุญุตููุงุช ุณุจุฏ ุฎุฑุฏ ุดูุง ุฏุฑ ุงูุชุธุงุฑ ูพุฑุฏุงุฎุช"
Action Type:  Open App
Platform:     All
```

### 4๏ธโฃ ุงุทูุงุนโุฑุณุงู ุจูุงฺฏ

```
Title:        "ููุงูู ุฌุฏุฏ ููุชุดุฑ ุดุฏ ๐"
Message:      "ุฑุงูููุง ุฎุฑุฏ ููพโุชุงูพ 2025"
Action Type:  Open URL
Action Value: https://yoursite.com/blog/laptop-guide
```

---

## ๐จ ุจูุชุฑู ุดููโูุง (Best Practices)

### โ ุนููุงู (Title)

- ฺฉูุชุงู ู ฺฏุฑุง (ุญุฏุงฺฉุซุฑ 50 ฺฉุงุฑุงฺฉุชุฑ)
- ุงุณุชูุงุฏู ุงุฒ Emoji ุจุฑุง ุฌูุจ ุชูุฌู
- ูุงุถุญ ู ููุฏ
- ุงุฒ ฺฉููุงุช ฺฉูุฏ ููู ุงุณุชูุงุฏู ฺฉู

**ูุซุงูโูุง ุฎูุจ:**
```
โ "ูุฑูุด ูฺู! ๐ฅ ุชุง 50% ุชุฎูู"
โ "ูุญุตูู ุฌุฏุฏ ๐ Galaxy S24"
โ "ุงุฏุขูุฑ ๐ ุณุจุฏ ุฎุฑุฏ ุดูุง"
```

**ูุซุงูโูุง ุจุฏ:**
```
โ "ุณูุงูุ ูุง ูุญุตููุงุช ุฌุฏุฏ ุฏุงุฑู ฺฉู..."  (ุฎู ุทููุงู)
โ "ุงุทูุงุนู"  (ุฎู ูุจูู)
โ "SALE SALE SALE!!!"  (ูุฒุงุญู)
```

### โ ูุชู (Message)

- ูุงุถุญ ู ูุฎุชุตุฑ (ุญุฏุงฺฉุซุฑ 150 ฺฉุงุฑุงฺฉุชุฑ)
- ุงุทูุงุนุงุช ููุฏ ุจุฏู
- Call to Action ุฏุงุดุชู ุจุงุด

**ูุซุงูโูุง ุฎูุจ:**
```
โ "ุชุง 50% ุชุฎูู ุฑู ุชูุงู ููพโุชุงูพโูุง. ููุท ุชุง ูพุงุงู ููุชู!"
โ "ฺฏูุด Galaxy S24 Ultra ุจุง ููุช ูฺู. ููุฌูุฏ ูุญุฏูุฏ!"
โ "ุณุจุฏ ุฎุฑุฏ ุดูุง ุฏุฑ ุงูุชุธุงุฑ ุงุณุช. ุจุฑุง ุชฺฉูู ุฎุฑุฏ ฺฉูฺฉ ฺฉูุฏ"
```

### โ ุชุตูุฑ (Image)

- ูุณุจุช ุงุจุนุงุฏ 2:1 (ูุซูุงู 1200x600)
- ุญุฌู ฺฉู (ุญุฏุงฺฉุซุฑ 1MB)
- ฺฉูุช ุจุงูุง
- ูุฑุชุจุท ุจุง ูุญุชูุง
- ุงุฒ HTTPS ุงุณุชูุงุฏู ฺฉู

### โ ุฒูุงูโุจูุฏ

- **ุจูุชุฑู ุณุงุนุงุช ุงุฑุณุงู:**
  - ุตุจุญ: 9-11
  - ุธูุฑ: 12-14
  - ุนุตุฑ: 17-20

- **ุงุฌุชูุงุจ ุงุฒ:**
  - ุฏุฑููุช ุดุจ (23-7)
  - ุณุงุนุงุช ฺฉุงุฑ ุงููู ุตุจุญ (7-9)
  - ุจุด ุงุฒ 2-3 ููุชู ุฏุฑ ุฑูุฒ

### โ Target (ูุฏูโฺฏุฐุงุฑ)

- ุจุฑุง ูุญุชูุง ุฎุงุต Android/iOSุ ูพูุชูุฑู ุฑุง ูุดุฎุต ฺฉู
- ุจุฑุง ูุฑูุด ููฺฏุงูุ "All" ุงูุชุฎุงุจ ฺฉู
- ุฏุฑ ุขูุฏู: target ฺฉุฑุฏู ุจุฑ ุงุณุงุณ ุนูุงู ฺฉุงุฑุจุฑ

---

## ๐ง ุชูุธูุงุช ูพุดุฑูุชู

### Database Tables

ูพูุงฺฏู 2 ุฌุฏูู ุงุฌุงุฏ ูโฺฉูู:

#### 1. `wp_bazarino_fcm_tokens`
ุฐุฎุฑู Token ูุง FCM ฺฉุงุฑุจุฑุงู

```sql
id | user_id | device_id | fcm_token | platform | is_active
```

#### 2. `wp_bazarino_notifications`
ุชุงุฑุฎฺู ููุชูโูุง ุงุฑุณุงู ุดุฏู

```sql
id | title | body | sent_count | failed_count | sent_at
```

### REST API Endpoints

#### ุซุจุช Token (ุงุฒ App)
```
POST /wp-json/bazarino/v1/notifications/register-token
Body: {
  "device_id": "...",
  "fcm_token": "...",
  "platform": "android"
}
```

#### ุงุฑุณุงู ููุชู (Admin)
```
POST /wp-json/bazarino/v1/notifications/send
Authorization: Bearer {token}
Body: {
  "title": "...",
  "body": "...",
  "image_url": "...",
  "data": {...}
}
```

#### ุฏุฑุงูุช ุขูุงุฑ (Admin)
```
GET /wp-json/bazarino/v1/notifications/stats
```

---

## ๐ ุฑูุน ูุดฺฉูุงุช ุฑุงุฌ

### โ ููุชู ุงุฑุณุงู ููโุดู

**ฺฺฉโูุณุช:**

1. โ FCM Server Key ุตุญุญ ูุงุฑุฏ ุดุฏูุ
2. โ ุญุฏุงูู 1 ุฏุณุชฺฏุงู ูุนุงู ูุณุชุ
3. โ Internet connection ุณุฑูุฑ OK ุงุณุชุ
4. โ cURL ุฏุฑ PHP ูุนุงู ุงุณุชุ

**ุจุฑุฑุณ:**
```php
// WordPress > Tools > Site Health
// ุจุฎุด PHP Info > cURL
```

### โ ุชุนุฏุงุฏ ุฏุณุชฺฏุงูโูุง 0 ุงุณุช

**ุฑุงูโุญู:**

1. โ ุงุทููุงู ุญุงุตู ฺฉู App ุจู ุฏุฑุณุช Token ุซุจุช ูโฺฉูู
2. โ Endpoint ุฏุฑ ุฏุณุชุฑุณ ุงุณุช: `/wp-json/bazarino/v1/notifications/register-token`
3. โ ุจุฑุฑุณ ุฌุฏูู Database:
```sql
SELECT * FROM wp_bazarino_fcm_tokens WHERE is_active = 1;
```

### โ ุชุตูุฑ ููุงุด ุฏุงุฏู ููโุดู

**ุฑุงูโุญู:**

1. โ URL ุชุตูุฑ ูุนุชุจุฑ ุงุณุชุ
2. โ ุชุตูุฑ ุงุฒ HTTPS serve ูโุดูุ
3. โ ุญุฌู ุชุตูุฑ ฺฉูุชุฑ ุงุฒ 1MB ุงุณุชุ
4. โ ูุฑูุช ุชุตูุฑ ุตุญุญ ุงุณุชุ (JPG, PNG)

---

## ๐ ูุธุงุฑุช ู ุจุฑุฑุณ

### ุจุฑุฑุณ ูุงฺฏโูุง

**WordPress Debug Log:**
```php
// wp-config.php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);

// Check: wp-content/debug.log
```

**FCM Response Log:**
ุฏุฑ ฺฉุฏ `class-notification-manager.php` ุฎุท 200-220

### ุจุฑุฑุณ Database

```sql
-- ุชุนุฏุงุฏ ุฏุณุชฺฏุงูโูุง ูุนุงู
SELECT COUNT(*) FROM wp_bazarino_fcm_tokens WHERE is_active = 1;

-- ุขุฎุฑู ููุชูโูุง ุงุฑุณุงู ุดุฏู
SELECT * FROM wp_bazarino_notifications ORDER BY sent_at DESC LIMIT 10;

-- ููุชูโูุง Failed
SELECT * FROM wp_bazarino_notifications WHERE failed_count > 0;
```

---

## ๐ ูพุดุชุจุงู

ุจุฑุง ูุดฺฉูุงุช ู ุณูุงูุงุช:

1. ๐ **ูุณุชูุฏุงุช ฺฉุงูู**: `docs/guides/NOTIFICATION_SYSTEM_GUIDE.md`
2. ๐ **ฺฏุฒุงุฑุด Bug**: GitHub Issues
3. ๐ฌ **ุณูุงูุงุช**: Telegram/Discord Support

---

## โ Checklist ุงุณุชูุงุฏู ุฑูุฒุงูู

- [ ] ุจุฑุฑุณ ุขูุงุฑ ุฏุณุชฺฏุงูโูุง ูุนุงู
- [ ] ุงุฑุณุงู ููุชู ุจุฑุง ูุญุตููุงุช/ูุญุชูุง ุฌุฏุฏ
- [ ] ุจุฑุฑุณ ุชุงุฑุฎฺู ู ูุฑุฎ ููููุช
- [ ] ูพุงุณุฎ ุจู feedback ฺฉุงุฑุจุฑุงู
- [ ] ุชุณุช ููุชูโูุง ูุจู ุงุฒ ุงุฑุณุงู ฺฏุณุชุฑุฏู

---

**๐ ุขูุงุฏู ุงุฑุณุงู ููุชูฺฉุดู ุจู ูุฒุงุฑุงู ฺฉุงุฑุจุฑ!**

**ุขุฎุฑู ุจุฑูุฒุฑุณุงู:** 8 ุงฺฉุชุจุฑ 2025

